import{r as d,e as T,j as e,L as z,G as H}from"./index-BwjIhAk5.js";import{b as L,M,a as Z}from"./index-6cARXTD6.js";import{B as $}from"./index-x1L1wPfd.js";import{G as q}from"./iconBase-i6NgAem3.js";/* empty css              */import{a as F}from"./AxiosInterceptor-C0G1OxbU.js";import{F as p}from"./Form-Cyv1odcU.js";import{I as l}from"./InputGroup-B5T7iIyR.js";import{L as O,y as m}from"./index-DBZWtKGJ.js";/* empty css                      */import{B as D}from"./Button-BDb3Qyxz.js";import"./Col-BeHysn_4.js";function R(i){return q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM5 10V20H19V10H5ZM11 14H13V16H11V14ZM7 14H9V16H7V14ZM15 14H17V16H15V14ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16Z"},child:[]}]})(i)}class x extends Error{}x.prototype.name="InvalidTokenError";function G(i){return decodeURIComponent(atob(i).replace(/(.)/g,(n,c)=>{let u=c.charCodeAt(0).toString(16).toUpperCase();return u.length<2&&(u="0"+u),"%"+u}))}function B(i){let n=i.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return G(n)}catch{return atob(n)}}function U(i,n){if(typeof i!="string")throw new x("Invalid token specified: must be a string");n||(n={});const c=n.header===!0?0:1,u=i.split(".")[c];if(typeof u!="string")throw new x(`Invalid token specified: missing part #${c+1}`);let w;try{w=B(u)}catch(f){throw new x(`Invalid token specified: invalid base64 for part #${c+1} (${f.message})`)}try{return JSON.parse(w)}catch(f){throw new x(`Invalid token specified: invalid json for part #${c+1} (${f.message})`)}}const ie=()=>{const[i,n]=d.useState(!1),[c,u]=d.useState(!1),[w,f]=d.useState(!1),I=T(),j=["registration","login","subscription","configure"],[t,g]=d.useState({fullname:"",phone:"",email:"",password:"",confirm:""}),y=["src/assets/login1.jpeg","src/assets/logIn3.jpg","src/assets/login.jpeg"],[V,k]=d.useState(0),[A,C]=d.useState(!0),[o,h]=d.useState({}),[v,_]=d.useState("registration"),S=j.indexOf(v);d.useEffect(()=>{let s;const r=()=>{C(!1),s=setTimeout(()=>{k(a=>(a+1)%y.length),C(!0),s=setTimeout(r,4500)},500)};return r(),()=>clearTimeout(s)},[]);const E=()=>{const s={};return t.fullname.trim()?/^[a-zA-Z ]+$/.test(t.fullname)||(s.fullname="Name must contain only letters",m.error(s.fullname)):(s.fullname="Full name is required",m.error(s.fullname)),t.phone.trim()?/^[0-9]{10}$/.test(t.phone)||(s.phone="Phone must be 10 digits",m.error(s.phone)):(s.phone="Phone number is required",m.error(s.phone)),t.email.trim()?/^[a-zA-Z][^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(s.email="Email is invalid",m.error(s.email)):(s.email="Email is required",m.error(s.email)),t.password?t.password.length<6&&(s.password="Must be at least 6 characters",m.error(s.password)):(s.password="Password is required",m.error(s.password)),t.confirm!==t.password&&(s.confirm="Confirm Passwords do not match",m.error(s.confirm)),h(s),Object.keys(s).length===0},N=s=>{const{name:r,value:a}=s.target;g({...t,[r]:a})},P=async s=>{if(s.preventDefault(),!E())return;const r={name:t.fullname,mobile:t.phone,email:t.email,password:t.password,isActive:!0};try{const a=await F.post("/admin",r);localStorage.setItem("userId",a.data.data),a.data.isValid?I("/subscription"):h({Password:"Invalid credentials"})}catch(a){console.error("API Error:",a),h({Password:"Login failed. Try again."})}};return e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12 w-100",children:e.jsx("div",{className:"stepper",children:j.map((s,r)=>{const a=v===s,b=r<S;return e.jsx("div",{className:"step-wrapper",children:e.jsxs("div",{className:`step ${a?"active":""} ${b?"completed":""}`,children:[e.jsx("div",{className:"step-circle",children:r+1}),e.jsx("div",{className:"step-label",children:s.charAt(0).toUpperCase()+s.slice(1)}),r<j.length-1&&e.jsx("div",{className:"step-line"})]})},s)})})})}),e.jsx(O,{position:"top-right",autoClose:3e3}),e.jsxs("div",{className:"row main-img-div",children:[e.jsx("div",{className:"col-md-9 rounded h-100",children:e.jsx("img",{style:{height:"100%",width:"100%",transition:"opacity 0.5s ease",opacity:A?1:0},src:y[V],alt:"",className:"rounded"})}),e.jsx("div",{className:"col-md-3 d-flex align-items-end justify-content-center",children:v==="registration"&&e.jsxs("form",{className:" bg-white w-100 h-100  rounded p-3 d-flex flex-column align-items-center gap-4",noValidate:!0,children:[e.jsx("h2",{className:"mb-2 fw-bold fs-3",children:"Create a Yelo account"}),e.jsxs(l,{hasValidation:!0,className:"",children:[e.jsx(l.Text,{children:e.jsx(L,{size:25,color:"#ffc800"})}),e.jsx(p.Control,{type:"text",value:t.fullname,className:"custom-input ",required:!0,placeholder:"Full Name",isInvalid:!!o.fullname,isValid:t.fullname&&!o.fullname,onChange:s=>{const r=s.target.value.replace(/[^a-zA-Z ]/g,"");g({...t,fullname:r});let a="";r.trim()?/^[a-zA-Z ]+$/.test(r)||(a="Name must contain only letters"):a="Full name is required",h(b=>({...b,fullname:a}))}})]}),e.jsxs(l,{hasValidation:!0,className:"",children:[e.jsx(l.Text,{children:e.jsx($,{size:24,color:"#ffc800"})}),e.jsx(p.Control,{className:"custom-input ",type:"text",value:t.phone,required:!0,placeholder:"Phone Number",isInvalid:!!o.phone,isValid:t.phone&&!o.phone,onChange:s=>g({...t,phone:s.target.value.replace(/[^0-9]/g,"")})})]}),e.jsxs(l,{hasValidation:!0,className:"",children:[e.jsx(l.Text,{children:e.jsx(M,{size:25,color:"#ffc800"})}),e.jsx(p.Control,{className:"custom-input ",type:"text",value:t.email,required:!0,placeholder:"Email Address",isInvalid:!!o.email,isValid:t.email&&!o.email,onChange:s=>{const r=s.target.value.charAt(0);if(!/[a-zA-Z]/.test(r)&&s.target.value.length>0){h({...o,email:"Email must start with a letter"});return}else{const a={...o};delete a.email,h(a)}g({...t,email:s.target.value})}})]}),e.jsxs(l,{hasValidation:!0,className:"",children:[e.jsx(l.Text,{children:e.jsx(R,{size:25,color:"#ffc800"})}),e.jsx(p.Control,{className:"custom-input ",type:i?"text":"password",placeholder:"Enter password",name:"password",isInvalid:!!o.password,isValid:t.password&&!o.password,value:t.password,onChange:N,required:!0})]}),e.jsxs(l,{hasValidation:!0,className:"",children:[e.jsx(l.Text,{children:e.jsx(Z,{size:25,color:"#ffc800"})}),e.jsx(p.Control,{className:"custom-input ",required:!0,type:c?"text":"password",placeholder:"Confirm password",isInvalid:!!o.confirm,isValid:t.confirm&&!o.confirm,name:"confirm",value:t.confirm,onChange:N})]}),e.jsx(D,{variant:"warning",className:"mt-2",type:"submit",onClick:s=>P(s),children:"Register"}),e.jsx(l,{className:"",children:e.jsxs(p.Check,{type:"checkbox",id:"custom-checkbox",label:"IsActive",name:"isActive",className:"ms-3",style:{display:"flex",alignItems:"center",fontSize:"1rem"},custom:"true",children:[e.jsx(p.Check.Input,{type:"checkbox",className:"custom-yellow-checkbox",onChange:()=>f(s=>!s),checked:w,style:{width:"20px",height:"20px",cursor:"pointer",marginRight:"8px"}}),e.jsxs(p.Check.Label,{htmlFor:"custom-checkbox",style:{fontSize:"0.825vw"},children:["I accept the ",e.jsx("a",{href:"/terms",style:{color:"#ffc300"},target:"_blank",rel:"noopener noreferrer",children:"Terms & Conditions"})," and ",e.jsx("a",{style:{color:"#ffc300"},href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]})}),e.jsxs("div",{className:"logInRedirect",children:["Already have an account? ",e.jsx(z,{style:{textDecoration:"none"},to:"/login",children:e.jsx("u",{children:"Log in"})})]}),e.jsx("div",{className:"google mb-3",children:e.jsx(H,{onSuccess:s=>{const r=U(s.credential);g({fullname:r.name,phone:"9999999999",email:r.email,password:r.jti.slice(0,6),confirm:r.jti.slice(0,6)})},onError:()=>{console.log("Google Login Failed")}})})]})})]})]})};export{ie as default};
