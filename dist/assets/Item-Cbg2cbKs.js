import{r as c,h as Be,f as Oe,j as e,u as Re,e as Ve,S as k,L as _}from"./index-BwjIhAk5.js";import{X as qe,D as O}from"./DataTableSettings-DsshIM33.js";import{d as Le,c as Me}from"./index-6cARXTD6.js";import{d as ee,e as We}from"./index-BFbuKzBk.js";import{a as p}from"./AxiosInterceptor-C0G1OxbU.js";import{L as Ue,y as te}from"./index-DBZWtKGJ.js";import{G as Qe,O as x}from"./index-BZ-hmF14.js";import{a as Xe,b as Ze}from"./index-DqFMOxbS.js";import{b as se}from"./index-CI57OQHg.js";import{b as Je,c as ae,a as Ke}from"./index-D0LwIwlf.js";import{B as Ye}from"./index-Ds-GlJ29.js";import{a as _e,b as re}from"./index-D8B2cRTV.js";import{b as et}from"./index-BB-pbf_3.js";import{b as tt}from"./index-D6nvb1sw.js";import{F as l}from"./Form-Cyv1odcU.js";import{B as I}from"./Button-BDb3Qyxz.js";import{R as z}from"./Row-D6dYXthX.js";import{C as d}from"./Col-BeHysn_4.js";import{I as o}from"./InputGroup-B5T7iIyR.js";import"./iconBase-i6NgAem3.js";import"./index-BjX9kMhX.js";const oe=c.forwardRef(({bsPrefix:S,className:n,striped:v,bordered:N,borderless:i,hover:w,size:r,variant:y,responsive:f,...P},D)=>{const j=Be(S,"table"),T=Oe(n,j,y&&`${j}-${y}`,r&&`${j}-${r}`,v&&`${j}-${typeof v=="string"?`striped-${v}`:"striped"}`,N&&`${j}-bordered`,i&&`${j}-borderless`,w&&`${j}-hover`),G=e.jsx("table",{...P,className:T,ref:D});if(f){let b=`${j}-responsive`;return typeof f=="string"&&(b=`${b}-${f}`),e.jsx("div",{className:b,children:G})}return G});oe.displayName="Table";const Nt=()=>{var Y;const S=Re(),[n,v]=c.useState({});c.useEffect(()=>{var t;(t=S.state)!=null&&t.permissions&&v(S.state.permissions)},[(Y=S.state)==null?void 0:Y.permissions]),localStorage.getItem("outletId");const N={itemId:"",itemName:"",itemGroupId:"",itemSubGroupId:"",itemCategoryId:"",itemSubCategoryId:"",productType:"",itemType:"",uom:"",itemCode:"",itemImage:"",hsnCode:"",qrCode:"",itemQuantity:"",itemPrice:"",outletId:"",taxId:"",itemSize:"",isSoldMRP:!1,isDiscountable:!1,isVisible:!1,isActive:!1,taxWithDiscount:!1},[i,w]=c.useState(N),[r,y]=c.useState({}),[f,P]=c.useState([]),[D,j]=c.useState([]),[T,G]=c.useState([]),[b,ie]=c.useState([]),[$,ce]=c.useState([]),[A,R]=c.useState([]),[st,le]=c.useState([]),[F,ne]=c.useState([]),[V,de]=c.useState(""),[me,at]=c.useState(!1),q=c.useRef(!1),he=Ve(),[ue,xe]=c.useState([]),pe=["itemName","isActive"],[L,M]=c.useState(!1),[je,H]=c.useState(!1),[ge,W]=c.useState(!1),[fe,E]=c.useState(!1),[be,U]=c.useState(!1),ye=()=>W(!1),Ce=()=>W(!0),Ie=()=>U(!1),Se=()=>{H(!1),w(N),y({}),M(!1),X(),J(),K(),Z()},ve=()=>{w(N),M(!1),y({}),H(!0),X(),J(),K(),Z(),ze()};c.useEffect(()=>{q.current||(q.current=!0,Q(),Te())},[]);const C=[{label:"Veg",value:"Veg"},{label:"NonVeg",value:"NonVeg"}],B=[{label:"S - Saleable Item",value:"Saleable Item"},{label:"O - Stockable Item",value:"Stockable Item"},{label:"P - Purchase Item",value:"Purchase Item"}],Q=async()=>{var t,a;E(!0);try{const s=await p.get("/items/outlet/849065aa-9146-42e9-9acc-59ee060e007f"),u=(a=(t=s==null?void 0:s.data)==null?void 0:t.list)==null?void 0:a.sort((g,h)=>new Date(h.createdDate)-new Date(g.createdDate));xe(u)}catch(s){console.error("Error fetching table data",s)}finally{E(!1)}},X=async()=>{E(!0);try{const t=await p.get("/itemgroups");P(t.data.list)}catch(t){console.error("Error fetching table data",t)}finally{E(!1)}},Ne=async t=>{var a;try{const s=await p.get(`/itemsubgroups/group/${t}`);j((a=s==null?void 0:s.data)==null?void 0:a.list)}catch(s){console.error("Error fetching subgroup data",s)}},we=async t=>{try{const a=await p.get(`/itemcategory/subgroup/${t}`);G(a.data.list)}catch(a){console.error("Error fetching subgroup data",a)}},De=async t=>{try{const a=await p.get(`/itemsubcategory/category/${t}`);ie(a.data.list)}catch(a){console.error("Error fetching subgroup data",a)}},Z=async()=>{var t,a;try{const s=await p.get("/uom"),u=(a=(t=s==null?void 0:s.data)==null?void 0:t.list)==null?void 0:a.sort((g,h)=>new Date(h.createdDate)-new Date(g.createdDate));ce(u)}catch(s){console.error("Error fetching table data",s)}},J=async()=>{var t,a;try{const s=await p.get("/outlets"),u=(a=(t=s==null?void 0:s.data)==null?void 0:t.list)==null?void 0:a.sort((g,h)=>new Date(h.createdDate)-new Date(g.createdDate));R(u)}catch(s){console.error("Error fetching outlet data",s)}},Te=async t=>{var a,s;try{const h=await p.get("/outletsubgrouptax/8451cb46-2d5c-4aa7-a794-5965f6c5c6bd/4f76b1f3-4188-4eda-aa4c-97c3a2ffbec8"),Ae=(s=(a=h==null?void 0:h.data)==null?void 0:a.list)==null?void 0:s.sort((Fe,He)=>new Date(He.createdDate)-new Date(Fe.createdDate));R(Ae)}catch(u){console.error("Error fetching outlet data",u)}},K=async()=>{var t,a;try{const s=await p.get("/tax"),u=(a=(t=s==null?void 0:s.data)==null?void 0:t.list)==null?void 0:a.sort((g,h)=>new Date(h.createdDate)-new Date(g.createdDate));le(u)}catch(s){console.error("Error fetching tax data",s)}},ze=async()=>{var t,a;try{const s=await p.get("/itemsize"),u=(a=(t=s==null?void 0:s.data)==null?void 0:t.list)==null?void 0:a.sort((g,h)=>new Date(h.createdDate)-new Date(g.createdDate));ne(u)}catch(s){console.error("Error fetching item size data",s)}},m=(t,a)=>{i[t]!==a&&(w(s=>({...s,[t]:a,...t==="itemGroupId"&&{itemSubGroupId:"",itemCategoryId:"",itemSubCategoryId:""},...t==="itemSubGroupId"&&{itemCategoryId:"",itemSubCategoryId:""},...t==="itemCategoryId"&&{itemSubCategoryId:""}})),y(s=>({...s,[t]:""})),t==="itemGroupId"&&Ne(a),t==="itemSubGroupId"&&we(a),t==="itemCategoryId"&&De(a))},Ge=t=>{console.log(t,"kk"),he("/group",{state:{groupData:t}})},Ee=(t,a)=>{window.confirm(`Are you sure you want to delete the item "${a}"?`)&&p.delete(`/items/${t}`).then(s=>{te.success(s.data.successMessage||"Item deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),Q()}).catch(s=>{console.error("Error deleting item :",s),te.error("Failed to delete item.",{position:"top-right",autoClose:3e3})})},ke=[{name:e.jsx("h5",{children:"Item Name"}),selector:t=>t.itemName,sortable:!0},{name:e.jsx("h5",{children:"Item Code"}),selector:t=>t.itemCode,sortable:!0},{name:e.jsx("h5",{children:"Status"}),cell:t=>e.jsx("span",{style:{color:t.isActive?"#88E788":"#FF474C",fontWeight:"bold"},children:t.isActive?"Active":"Inactive"}),sortable:!0},{name:e.jsx("h5",{children:"Action"}),center:!0,cell:t=>e.jsxs(e.Fragment,{children:[(n==null?void 0:n.write)&&e.jsx(_,{className:"action-icon",onClick:()=>Ge(t),children:e.jsx(We,{size:24,color:"#87CEEB"})}),(n==null?void 0:n.delete)&&e.jsx(_,{className:"action-icon",onClick:()=>Ee(t.itemId,t.itemName),children:e.jsx(Me,{size:30,style:{margin:"1vh"},color:"#FF474C"})})]})}],Pe=c.useMemo(()=>e.jsxs("div",{className:"d-flex justify-content-end gap-2 align-items-center w-100",children:[e.jsx(l,{className:"d-flex",children:e.jsx(l.Control,{type:"search",placeholder:"Search...",className:"me-2 rounded-pill","aria-label":"Search",onChange:t=>de(t.target.value)})}),(n==null?void 0:n.import)&&e.jsxs(I,{variant:"info",onClick:Ce,children:[e.jsx(Xe,{size:20})," Import"]}),(n==null?void 0:n.export)&&e.jsxs(I,{variant:"success",children:[e.jsx(Ze,{size:20})," Export"]}),(n==null?void 0:n.write)&&e.jsxs(I,{variant:"warning",onClick:ve,children:[e.jsx(Qe,{size:20})," Add"]})]}),[n,V]),$e=async t=>{t.preventDefault(),U(!0),H(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{}),fe?e.jsxs("div",{className:"d-flex justify-content-center",style:{marginTop:"20%"},children:[e.jsx(k,{animation:"grow",variant:"secondary",size:"sm"}),e.jsx(k,{animation:"grow",variant:"warning"}),e.jsx(k,{animation:"grow",variant:"secondary",size:"sm"}),e.jsx(k,{animation:"grow",variant:"warning"})]}):e.jsx("div",{className:"d-flex",children:e.jsx("div",{className:"p-3",style:{width:"93vw"},children:e.jsx("div",{className:"",style:{width:"100%"},children:e.jsx(qe,{columns:ke,data:O.filterItems(ue,pe,V),pagination:!0,paginationPerPage:O.paginationPerPage,paginationRowsPerPageOptions:O.paginationRowsPerPageOptions,progressPending:me,subHeader:!0,fixedHeaderScrollHeight:"400px",subHeaderComponent:Pe,persistTableHead:!0})})})}),e.jsxs(x,{show:je,onHide:Se,placement:"end",backdrop:"false",className:"custom-offcanvas",children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx("div",{className:"w-100 text-center",children:e.jsx(x.Title,{style:{fontSize:"30px",fontWeight:600},children:L?"Edit Item":"Add Item"})})}),e.jsx(x.Body,{style:{marginTop:"-2vh"},children:e.jsxs(l,{className:"h-90",children:[e.jsxs(z,{className:"mb-2",children:[e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-4",children:[e.jsx(o.Text,{id:"itemName",children:e.jsx(Le,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{name:"itemName",value:i.itemName||"",onChange:t=>m("itemName",t.target.value.replace(/[^a-zA-Z ]/g,"")),placeholder:"Item name","aria-label":"itemName",isInvalid:!!r.itemName,isValid:i.itemName&&!r.itemName}),r.itemName&&e.jsx("span",{className:"error-msg",children:r.itemName})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemGroupId",children:e.jsx(se,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemGroupId",value:i.itemGroupId||"",onChange:t=>m("itemGroupId",t.target.value),children:[e.jsx("option",{children:"Select group"}),f==null?void 0:f.map(t=>e.jsx("option",{value:t.itemGroupId,children:t.itemGroupName},t.itemGroupId))]}),r.itemGroupId&&e.jsx("span",{className:"error-msg",children:r.itemGroupId})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemSubGroupId",children:e.jsx(se,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemSubGroupId",value:i.itemSubGroupId||"",onChange:t=>m("itemSubGroupId",t.target.value),children:[e.jsx("option",{value:"",children:"Select sub group"}),D==null?void 0:D.map(t=>e.jsx("option",{value:t.itemSubGroupId,children:t.itemSubGroupName},t.itemSubGroupId))]}),r.itemSubGroupId&&e.jsx("span",{className:"error-msg",children:r.itemSubGroupId})]})})]}),e.jsxs(z,{className:"mb-2",children:[e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemCategoryId",children:e.jsx(Ye,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemCategoryId",value:i.itemCategoryId||"",onChange:t=>m("itemCategoryId",t.target.value),children:[e.jsx("option",{value:"",children:"Select category"}),T==null?void 0:T.map(t=>e.jsx("option",{value:t.itemCategoryId,children:t.itemCategoryName},t.itemCategoryId))]}),r.itemCategoryId&&e.jsx("span",{className:"error-msg",children:r.itemCategoryId})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemSubCategoryId",children:e.jsx(Je,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemSubCategoryId",value:i.itemSubCategoryId||"",onChange:t=>m("itemSubCategoryId",t.target.value),children:[e.jsx("option",{value:"",children:"Select sub category"}),b==null?void 0:b.map(t=>e.jsx("option",{value:t.itemSubCategoryID,children:t.itemSubCategoryName},t.itemSubCategoryID))]}),r.itemSubCategoryId&&e.jsx("span",{className:"error-msg",children:r.itemSubCategoryId})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"productType",children:e.jsx(_e,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"productType",value:i.productType||"",onChange:t=>m("productType",t.target.value),children:[e.jsx("option",{value:"",children:"Select product type"}),B==null?void 0:B.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),r.productType&&e.jsx("span",{className:"error-msg",children:r.productType})]})})]}),e.jsxs(z,{className:"mb-3",children:[e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemType",children:e.jsx(et,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemType",value:i.itemType||"",onChange:t=>m("itemType",t.target.value),children:[e.jsx("option",{value:"",children:"Select item type"}),i.itemType&&!(C!=null&&C.some(t=>t.value===i.itemType))&&e.jsx("option",{value:i.itemType,children:i.itemType}),C==null?void 0:C.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),r.itemType&&e.jsx("span",{className:"error-msg",children:r.itemType})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"uom",children:e.jsx(re,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"uom",value:i.uom||"",onChange:t=>m("uom",t.target.value),children:[e.jsx("option",{value:"",children:"Select uom"}),$==null?void 0:$.map(t=>e.jsx("option",{value:t.uomId,children:t.uomName},t.uomId))]}),r.uom&&e.jsx("span",{className:"error-msg",children:r.uom})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemCode",children:e.jsx(tt,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{name:"itemCode",value:i.itemCode||"",onChange:t=>m("itemCode",t.target.value),placeholder:"Item code","aria-label":"itemCode",isInvalid:!!r.itemCode,isValid:i.itemCode&&!r.itemCode}),r.itemCode&&e.jsx("span",{className:"error-msg",children:r.itemCode})]})})]}),e.jsxs(z,{className:"mb-3",children:[e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"hsnCode",children:e.jsx(ae,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{name:"hsnCode",value:i.hsnCode||"",onChange:t=>m("hsnCode",t.target.value),placeholder:"Hsn code","aria-label":"hsnCode",isInvalid:!!r.hsnCode,isValid:i.hsnCode&&!r.hsnCode}),r.hsnCode&&e.jsx("span",{className:"error-msg",children:r.hsnCode})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"qrCode",children:e.jsx(ae,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{name:"qrCode",value:i.qrCode||"",onChange:t=>m("qrCode",t.target.value),placeholder:"QR code","aria-label":"qrCode",isInvalid:!!r.qrCode,isValid:i.qrCode&&!r.qrCode}),r.qrCode&&e.jsx("span",{className:"error-msg",children:r.qrCode})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"isActive",children:e.jsx(Ke,{size:25,color:"#ffc800"})}),e.jsxs(l.Check,{type:"checkbox",id:"custom-checkbox",label:"IsActive",name:"isActive",className:"ms-3",style:{display:"flex",alignItems:"center",fontSize:"1rem"},custom:"true",children:[e.jsx(l.Check.Input,{type:"checkbox",checked:i.isActive,onChange:t=>m("isActive",t.target.checked),style:{width:"20px",height:"20px",cursor:"pointer",marginRight:"8px"}}),e.jsx(l.Check.Label,{htmlFor:"custom-checkbox",children:"IsActive"})]})]})})]}),e.jsxs(z,{children:[e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemSize",children:e.jsx(re,{size:25,color:"#ffc800"})}),e.jsxs(l.Select,{name:"itemSize",value:i.itemSize||"",onChange:t=>m("itemSize",t.target.value),children:[e.jsx("option",{value:"",children:"Select item size"}),F==null?void 0:F.map(t=>e.jsx("option",{value:t.id,children:t.sizeName},t.id))]}),r.itemSize&&e.jsx("span",{className:"error-msg",children:r.itemSize})]})}),e.jsx(d,{md:4,children:e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemImage",children:e.jsx(ee,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{type:"file"})]})})]}),e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx(I,{type:"submit",variant:"warning",className:"me-2",onClick:$e,children:"Next"})})]})})]}),e.jsxs(x,{show:be,onHide:Ie,backdrop:"static",placement:"end",className:"custom-offcanvass",children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx("div",{className:"w-100 text-center",children:e.jsx(x.Title,{style:{fontSize:"30px",fontWeight:600},children:L?"Edit Outlet & Tax":"Add Outlet & Tax"})})}),e.jsx(x.Body,{style:{marginTop:"-2vh"},children:e.jsxs(l,{className:"h-90",children:[e.jsxs(oe,{striped:!0,bordered:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Outlet Name"}),e.jsx("th",{children:"Item Name"}),e.jsx("th",{children:"Item Size"}),e.jsx("th",{children:"Item Price"}),e.jsx("th",{children:"IsSoldMRP"}),e.jsx("th",{children:"IsDiscount"}),e.jsx("th",{children:"IsVisible"}),e.jsx("th",{children:"Taxes"})]})}),e.jsx("tbody",{children:A==null?void 0:A.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.outletName}),e.jsx("td",{children:"Item Name"}),e.jsx("td",{children:"Size"}),e.jsx("td",{children:"₹0.00"}),e.jsxs("td",{children:[" ",e.jsx("input",{type:"checkbox"})]}),e.jsxs("td",{children:[" ",e.jsx("input",{type:"checkbox"})]}),e.jsxs("td",{children:[" ",e.jsx("input",{type:"checkbox"})]}),e.jsx("td",{children:"0%"})]},t.outletId))})]}),e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(I,{type:"submit",variant:"warning",children:"Save"})})]})})]}),e.jsxs(x,{show:ge,onHide:ye,backdrop:"static",placement:"end",children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx("div",{className:"w-100 text-center",children:e.jsx(x.Title,{style:{fontSize:"30px",fontWeight:600},children:"Add File"})})}),e.jsx(x.Body,{style:{marginTop:"-2vh"},children:e.jsxs(l,{className:"h-90",children:[e.jsxs(o,{className:"mb-3",children:[e.jsx(o.Text,{id:"itemGroupName",children:e.jsx(ee,{size:25,color:"#ffc800"})}),e.jsx(l.Control,{type:"file"})]}),e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(I,{type:"submit",variant:"warning",children:"Save"})})]})})]})]})};export{Nt as default};
