import{u as me,r as i,e as he,j as e,S as v,L as B}from"./index-BwjIhAk5.js";import{X as xe,D as A}from"./DataTableSettings-DsshIM33.js";import{e as pe,b as be,f as je,g as fe,c as ge}from"./index-6cARXTD6.js";import{F as ve,a as ye,b as Ne,g as Se,d as Te,e as Ce}from"./index-BFbuKzBk.js";import{a as j}from"./AxiosInterceptor-C0G1OxbU.js";import{L as Ie,y}from"./index-DBZWtKGJ.js";import{G as we,O as x}from"./index-BZ-hmF14.js";import{a as Ee,b as ke}from"./index-DqFMOxbS.js";import{a as De}from"./index-D0LwIwlf.js";/* empty css                         */import{G as ze}from"./iconBase-i6NgAem3.js";import{a as Fe}from"./index-CjJ6jxNk.js";import{c as Oe}from"./index-BB-pbf_3.js";import{c as Ae}from"./index-D6nvb1sw.js";import{F as n}from"./Form-Cyv1odcU.js";import{B as f}from"./Button-BDb3Qyxz.js";import{R as g}from"./Row-D6dYXthX.js";import{C as u}from"./Col-BeHysn_4.js";import{I as s}from"./InputGroup-B5T7iIyR.js";import"./index-BjX9kMhX.js";function Pe(p){return ze({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M41 265v30h430v-30H41zm39 48v158.066h32V313H80zm320 0v158.066h32V313h-32z"},child:[]}]})(p)}const sa=()=>{const p=me(),P=i.useRef(!1);he();const M=localStorage.getItem("channelId"),[l,G]=i.useState({}),[_,W]=i.useState(!0);i.useEffect(()=>{const a=setTimeout(()=>{W(!1)},2e3);return()=>clearTimeout(a)},[]),i.useEffect(()=>{var a;(a=p.state)!=null&&a.permissions&&G(p.state.permissions)},[p.state]);const[X,$]=i.useState(""),[U,He]=i.useState(!1),[Y,J]=i.useState([]),K=["tableName","capacity","tableStatus","tableLocation","isActive"],N={tableId:"",tableName:"",capacity:"",outletId:"",tableStatus:"",direction:"",type:"",serial:"",tableShapes:"",section:"",openTable:!1,isActive:!1},[t,c]=i.useState(N),[o,S]=i.useState({}),[T,C]=i.useState(!1),[Q,I]=i.useState(!1),[Z,H]=i.useState(!1),[w,ee]=i.useState([]),[ae,E]=i.useState(!1),[b,k]=i.useState(null),te=()=>H(!1),se=()=>H(!0);console.log(t);const V=()=>{I(!1),c(N),S({}),C(!1),R()},le=()=>{c(N),C(!1),S({}),I(!0),R()};i.useEffect(()=>{P.current||(P.current=!0,D())},[]);const R=async()=>{var a;try{const r=await j.get("/outlets",{});ee((a=r==null?void 0:r.data)==null?void 0:a.list)}catch(r){console.error("Error fetching table data",r)}},D=async()=>{var a,r;try{const d=await j.get("/tables"),z=(r=(a=d==null?void 0:d.data)==null?void 0:a.list)==null?void 0:r.sort((F,O)=>new Date(O.createdDate)-new Date(F.createdDate));J(z)}catch(d){console.error("Error fetching table data",d)}},ie=()=>{const{tableName:a,capacity:r,outletId:d,tableStatus:z,direction:F,type:O,serial:ue}=t,m={};let h=!0;return a||(h=!1,m.tableName="Table name is required."),r||(h=!1,m.capacity="Pax is required"),d||(h=!1,m.outletId="Outlet is required"),z||(h=!1,m.tableStatus="Table status is required"),F||(h=!1,m.direction="Direction is required"),O||(h=!1,m.type="Table type is required"),ue||(h=!1,m.serial="Serial no. is required"),S(m),h},ne=a=>{C(!0),c({tableId:a.tableId,tableName:a.tableName,capacity:a.capacity,outletId:a.outletId,outletName:a.outletName,direction:a.direction,serial:a.serial,type:a.type,channelID:M,tableLocation:a.tableLocation,tableStatus:a.tableStatus,openTable:a.openTable,isActive:a.isActive,section:a.section}),I(!0)},re=(a,r)=>{k({id:a,name:r}),E(!0)},ce=()=>{b&&j.delete(`/tables/${b.id}`).then(a=>{y.success(a.data.successMessage||"Table deleted successfully!"),D()}).catch(a=>{console.error("Error deleting table:",a),y.error("Failed to delete table.")}).finally(()=>{E(!1),k(null)})},L=()=>{E(!1),k(null)},oe=[{name:e.jsx("h5",{children:"Table Name"}),selector:a=>a.tableName,sortable:!0},{name:e.jsx("h5",{children:"Pax"}),selector:a=>a.capacity,sortable:!0},{name:e.jsx("h5",{children:"Outlet"}),selector:a=>a.channelName,sortable:!0},{name:e.jsx("h5",{children:"Table Status"}),selector:a=>a.tableStatus,sortable:!0},{name:e.jsx("h5",{children:"Status"}),cell:a=>e.jsx("span",{style:{color:a.isActive?"#88E788":"#FF474C",fontWeight:"bold"},children:a.isActive?"Active":"Inactive"}),sortable:!0},{name:e.jsx("h5",{children:"Action"}),center:!0,cell:a=>e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"action-icon",onClick:()=>ne(a),children:e.jsx(Ce,{size:24,color:"#87CEEB"})}),e.jsx(B,{className:"action-icon",onClick:()=>re(a.tableId,a.tableName),children:e.jsx(ge,{size:30,style:{margin:"1vh"},color:"#FF474C"})})]})}],de=i.useMemo(()=>e.jsxs("div",{className:"d-flex justify-content-end gap-2 align-items-center w-100",children:[e.jsx(n,{className:"d-flex",children:e.jsx(n.Control,{type:"search",placeholder:"Search...",className:"me-2 rounded-pill","aria-label":"Search",onChange:a=>$(a.target.value)})}),(l==null?void 0:l.import)&&e.jsxs(f,{variant:"info",onClick:se,children:[e.jsx(Ee,{size:20,style:{marginTop:"-0.5vh"}})," Import"]}),(l==null?void 0:l.export)&&e.jsxs(f,{variant:"success",children:[e.jsx(ke,{size:20,style:{marginTop:"-0.5vh"}})," Export"]}),(l==null?void 0:l.write)&&e.jsxs(f,{variant:"warning",onClick:le,children:[e.jsx(we,{size:20,style:{marginTop:"-0.5vh"}})," Add"]})]}),[l==null?void 0:l.write,l==null?void 0:l.export,l==null?void 0:l.import]),q=async a=>{if(a.preventDefault(),!ie())return;const r={tableName:t.tableName,capacity:t.capacity,outletId:t.outletId,tableStatus:t.tableStatus,direction:t.direction,type:t.type,isActive:t.isActive,serial:t.serial,section:t.section,tableShapes:t.tableShapes,openTable:t.openTable};try{let d;T?(d=await j.put(`/tables/${t.tableId}`,r),D()):d=await j.post("/tables",r),V(),y.success(d.data.successMessage||"Success!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(d){console.error("API Error:",d),y.error("Something went wrong! Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}};return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{}),ae&&e.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"opacity 0.3s ease-in-out"},tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content border-0 shadow-lg rounded-4 animate__animated animate__fadeInDown",children:[e.jsxs("div",{className:"modal-header bg-danger text-white rounded-top-4",children:[e.jsxs("h5",{className:"modal-title d-flex align-items-center gap-2",children:[e.jsx(ve,{}),"Confirm Deletion"]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:L})]}),e.jsx("div",{className:"modal-body text-center",children:e.jsxs("p",{className:"fs-5 mb-0",children:["Are you sure you want to delete"," ",e.jsx("strong",{children:b==null?void 0:b.name}),"?"]})}),e.jsxs("div",{className:"modal-footer justify-content-center border-0 pb-4",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary rounded text-white px-4 d-flex align-items-center gap-2",onClick:L,children:[e.jsx(ye,{}),"Cancel"]}),e.jsxs("button",{type:"button",className:"btn btn-danger text-white rounded px-4 shadow d-flex align-items-center gap-2",onClick:ce,children:[e.jsx(Ne,{}),"Yes, Delete"]})]})]})})}),_?e.jsxs("div",{className:"d-flex justify-content-center",style:{marginTop:"20%"},children:[e.jsx(v,{animation:"grow",variant:"secondary",size:"sm"}),e.jsx(v,{animation:"grow",variant:"warning"}),e.jsx(v,{animation:"grow",variant:"secondary",size:"sm"}),e.jsx(v,{animation:"grow",variant:"warning"})]}):e.jsx("div",{className:"d-flex",children:e.jsx("div",{className:"p-3",style:{width:"100vw"},children:e.jsx(xe,{className:"DataTable",columns:oe,data:A.filterItems(Y,K,X),pagination:!0,paginationPerPage:A.paginationPerPage,paginationRowsPerPageOptions:A.paginationRowsPerPageOptions,progressPending:U,subHeader:!0,fixedHeaderScrollHeight:"400px",subHeaderComponent:de,persistTableHead:!0})})}),e.jsxs(x,{show:Q,onHide:V,placement:"end",backdrop:"false",className:"custom-canvas",style:{"--bs-offcanvas-width":"1000px"},children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx("div",{className:"w-100 text-center",children:e.jsx(x.Title,{style:{fontSize:"30px",fontWeight:600},children:T?"Edit Table":"Add Table"})})}),e.jsx(x.Body,{className:"row",style:{marginTop:"-2vh"},children:e.jsxs(n,{className:"h-90 ",children:[e.jsxs(g,{children:[e.jsx(u,{md:6,children:e.jsxs(s,{className:"mb-4",children:[e.jsx(s.Text,{id:"Tablename",children:e.jsx(pe,{size:25,color:"#ffc800"})}),e.jsx(n.Control,{name:"Tablename",value:t.tableName||"",onChange:a=>c({...t,tableName:a.target.value}),placeholder:"Table name","aria-label":"Tablename",isInvalid:!!o.tableName,isValid:t.tableName&&!o.tableName})]})}),e.jsx(u,{md:6,children:e.jsxs(s,{hasValidation:!0,className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(be,{size:24,color:"#ffc800"})}),e.jsx(n.Control,{name:"capacity",value:t.capacity||"",onChange:a=>c({...t,capacity:a.target.value}),placeholder:"Enter capacity","aria-label":"capacity",isInvalid:!!o.capacity,isValid:t.capacity&&!o.capacity})]})})]}),e.jsxs(g,{children:[e.jsx(u,{md:6,children:e.jsxs(s,{className:"mb-4",children:[e.jsx(s.Text,{id:"employeeTypeId",children:e.jsx(Se,{size:25,color:"#ffc800"})}),e.jsxs(n.Select,{value:t.outletId,onChange:a=>c({...t,outletId:a.target.value}),required:!0,isInvalid:!!o.outletId,children:[e.jsx("option",{value:"",children:"Select Outlet"}),w==null?void 0:w.map(a=>e.jsx("option",{value:a.outletId,children:a.outletName},a.outletId))]})]})}),e.jsx(u,{md:6,children:e.jsxs(s,{className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(je,{size:25,color:"#ffc800"})}),e.jsxs(n.Select,{value:t.tableStatus,onChange:a=>c({...t,tableStatus:a.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Table Status"}),e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Occupied",children:"Occupied"}),e.jsx("option",{value:"Reserved",children:"Reserved"}),e.jsx("option",{value:"Hold",children:"Hold"})]})]})})]}),e.jsxs(g,{children:[e.jsx(u,{md:6,children:e.jsxs(s,{hasValidation:!0,className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(Fe,{size:24,color:"#ffc800"})}),e.jsx(n.Control,{name:"Direction",value:t.direction||"",onChange:a=>c({...t,direction:a.target.value}),placeholder:"Enter Direction","aria-label":"capacity",isInvalid:!!o.direction,isValid:t.direction&&!o.direction})]})}),e.jsx(u,{md:6,children:e.jsxs(s,{hasValidation:!0,className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(Oe,{size:24,color:"#ffc800"})}),e.jsx(n.Control,{name:"Direction",value:t.type||"",onChange:a=>c({...t,type:a.target.value}),placeholder:"Enter Table Type","aria-label":"capacity",isInvalid:!!o.type,isValid:t.type&&!o.type})]})})]}),e.jsxs(g,{children:[e.jsx(u,{md:6,children:e.jsxs(s,{hasValidation:!0,className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(fe,{size:24,color:"#ffc800"})}),e.jsx(n.Control,{name:"Direction",value:t.serial||"",onChange:a=>c({...t,serial:a.target.value}),placeholder:"Enter Serial Number","aria-label":"capacity",isInvalid:!!o.serial,isValid:t.serial&&!o.serial})]})}),e.jsx(u,{md:6,children:e.jsxs(s,{hasValidation:!0,className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(Ae,{size:24,color:"#ffc800"})}),e.jsx(n.Control,{name:"Direction",value:t.section||"",onChange:a=>c({...t,section:a.target.value}),placeholder:"Enter Section","aria-label":"capacity",isInvalid:!!o.section,isValid:t.section&&!o.section})]})})]}),e.jsxs(g,{children:[e.jsx(u,{md:6,className:"d-flex gap-2 align-items-center",children:e.jsxs(s,{className:"mb-4",children:[e.jsx(s.Text,{children:e.jsx(Pe,{size:25,color:"#ffc800"})}),e.jsxs(n.Select,{value:t.tableShapes,onChange:a=>c({...t,tableShapes:a.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Table Shape"}),e.jsx("option",{value:"Round",children:"Round"}),e.jsx("option",{value:"Square",children:"Square"}),e.jsx("option",{value:"Oval",children:"Oval"})]})]})}),e.jsx(u,{md:6,children:e.jsxs(s,{className:"mb-4",children:[e.jsx(s.Text,{id:"isActive",children:e.jsx(De,{size:25,color:"#ffc800"})}),e.jsxs(n.Check,{type:"checkbox",id:"custom-checkbox",label:"IsActive",name:"isActive",className:"ms-3",style:{display:"flex",alignItems:"center",fontSize:"1rem"},custom:"true",children:[e.jsx(n.Check.Input,{className:"custom-yellow-checkbox",type:"checkbox",onChange:a=>c({...t,isActive:a.target.checked}),checked:t.isActive,style:{width:"20px",height:"20px",cursor:"pointer",marginRight:"8px"}}),e.jsx(n.Check.Label,{htmlFor:"custom-checkbox",children:"Is Active"})]})]})})]}),e.jsx("div",{className:"d-flex justify-content-center mt-4",onClick:a=>q(a),children:e.jsx(f,{type:"submit",variant:"warning",children:T?"Update":"Save"})})]})})]}),e.jsxs(x,{show:Z,onHide:te,backdrop:"static",placement:"end",children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx("div",{className:"w-100 text-center",children:e.jsx(x.Title,{style:{fontSize:"30px",fontWeight:600},children:"Add File"})})}),e.jsx(x.Body,{style:{marginTop:"-2vh"},children:e.jsxs(n,{className:"h-90",onSubmit:q,children:[e.jsxs(s,{className:"mb-3",children:[e.jsx(s.Text,{id:"itemGroupName",children:e.jsx(Te,{size:25,color:"#ffc800"})}),e.jsx(n.Control,{type:"file"})]}),e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(f,{type:"submit",variant:"warning",children:"Submit"})})]})})]})]})};export{sa as default};
