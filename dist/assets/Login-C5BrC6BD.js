import{e as b,r as l,j as s}from"./index-BwjIhAk5.js";import{M as C,a as I}from"./index-6cARXTD6.js";import{a as T}from"./AxiosInterceptor-C0G1OxbU.js";/* empty css              */import{I as c}from"./InputGroup-B5T7iIyR.js";import{F as x}from"./Form-Cyv1odcU.js";import{L as V,y as d}from"./index-DBZWtKGJ.js";/* empty css                      */import{B as A}from"./Button-BDb3Qyxz.js";import"./iconBase-i6NgAem3.js";import"./Col-BeHysn_4.js";const G=()=>{const u=b(),m=["registration","subscription","login","configure"],p=["src/assets/login1.jpeg","src/assets/logIn3.jpg","src/assets/login.jpeg"],[j,w]=l.useState(0),[v,h]=l.useState(!0),E={Email:"",Password:""},[r,N]=l.useState(E),[o,n]=l.useState({}),[f,S]=l.useState("login");l.useEffect(()=>{let a;const t=()=>{h(!1),a=setTimeout(()=>{w(e=>(e+1)%p.length),h(!0),a=setTimeout(t,2e3)},300)};return t(),()=>clearTimeout(a)},[]);const g=(a,t)=>{N(e=>({...e,[a]:t})),n(e=>({...e,[a]:""}))},P=()=>{const{Email:a,Password:t}=r,e={};let i=!0;return a?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||(i=!1,e.Email="Email is invalid.",d.error(e.Email)):(i=!1,e.Email="Email is required.",d.error(e.Email)),t?t.length<6&&(i=!1,e.Password="Must be at least 6 characters.",d.error(e.Password)):(i=!1,e.Password="Password is required.",d.error(e.Password)),n(e),i},y=async a=>{if(a.preventDefault(),!P())return;const t={email:r.Email,Password:r.Password};try{const e=await T.post("/adminauth/login",t);e.data.isValid?(localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),e.data.data.authChannels.length===0?u("/channel-outlet"):u("/dashboard")):n({Password:"Invalid credentials"})}catch(e){console.error("API Error:",e),n({Password:"Login failed. Try again."})}};return s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"row mb-3",children:s.jsx("div",{className:"col-md-12 w-100",children:s.jsx("div",{className:"stepper",children:m.map((a,t)=>{const e=f===a,i=t<m.indexOf(f);return s.jsx("div",{className:"step-wrapper",children:s.jsxs("div",{className:`step ${e?"active":""} ${i?"completed":""}`,children:[s.jsx("div",{className:"step-circle",children:t+1}),s.jsx("div",{className:"step-label",children:a.charAt(0).toUpperCase()+a.slice(1)}),t<m.length-1&&s.jsx("div",{className:"step-line"})]})},a)})})})}),s.jsx(V,{position:"top-right",autoClose:3e3}),s.jsxs("div",{className:"row main-img-div",children:[s.jsx("div",{className:"col-md-9 rounded h-100",children:s.jsx("img",{style:{height:"100%",width:"100%",transition:"opacity 0.5s ease",opacity:v?1:0},src:p[j],alt:"",className:"rounded"})}),s.jsx("div",{className:"col-md-3 h-100 d-flex align-items-end justify-content-center",children:s.jsxs("form",{className:"bg-white w-100 h-100 rounded p-3 d-flex flex-column justify-content-center align-items-center gap-4",noValidate:!0,children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"mb-2 fw-bold fs-1",children:"Welcome Back"}),s.jsx("p",{className:"fs-6",children:"Enter your email and password to access your account"})]}),s.jsxs(c,{hasValidation:!0,className:"",children:[s.jsx(c.Text,{children:s.jsx(C,{size:25,color:"#ffc800"})}),s.jsx(x.Control,{type:"email",name:"Email",value:r.Email||"",onChange:a=>g("Email",a.target.value),className:`custom-input ${o.Email?"input-error":""}`,autoComplete:"off",placeholder:"Email Address",isInvalid:!!o.Email,isValid:r.Email&&!o.Email})]}),s.jsxs(c,{hasValidation:!0,className:"",children:[s.jsx(c.Text,{children:s.jsx(I,{size:24,color:"#ffc800"})}),s.jsx(x.Control,{type:"password",name:"Password",value:r.Password||"",onChange:a=>g("Password",a.target.value),className:`custom-input ${o.Password?"input-error":""}`,autoComplete:"off",required:!0,placeholder:"Password",isInvalid:!!o.Password,isValid:r.Password&&!o.Password})]}),s.jsx(A,{variant:"warning",className:"mt-2",type:"submit",onClick:y,children:"Log In"})]})})]})]})};export{G as default};
